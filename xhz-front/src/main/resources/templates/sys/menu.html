<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>菜单管理</title>
		<#include "/common/header.html">
	</head>
	<body>
		<div id="app" v-cloak>
			<div class="frame-card">
				<div class="frame-card-header">
					<el-form ref="queryForm" :model="q" label-width="80px">
						<el-row>
							<el-col :span="4">
								<el-form-item prop="name" label="菜单名称">
									<el-input v-model="q.name" clearable></el-input>
								</el-form-item>
							</el-col>
							<el-col :span="4">
								<el-form-item prop="url" label="菜单URL">
									<el-input v-model="q.url" clearable></el-input>
								</el-form-item>
							</el-col>
							&nbsp;&nbsp;
							<el-button type="success" @click="query"><i class="fa fa-search"></i>&nbsp;查询</el-button>
							<el-button @click="handleReset('queryForm')"><i class="fa fa-reply"></i></i>&nbsp;重置</el-button>
						</el-row>
					</el-form>
				</div>
				<el-button type="primary" @click="add"><i class="fa fa-plus"></i>&nbsp;添加</el-button>
				<el-button type="warning" @click="update"><i class="fa fa-pencil-square-o"></i>&nbsp;修改</el-button>
				<el-button type="danger" @click="del"><i class="fa fa-trash-o"></i>&nbsp;删除</el-button>
				<div>
					<table class="layui-hide" id="menuTable" lay-filter="menuTable"></table>
				</div>
			</div>

			<div id="menuDialog" class="frame-dialog">
				<el-card class="box-card">
					<el-form @submit.native.prevent ref="menuForm" :rules="ruleValidate" :model="menu" label-width="80px">
						<el-row>
							<el-form-item prop="type" label="类型">
								<template v-if="menu.type == 0">
									<span class="layui-badge layui-bg-green">目录</span>
								</template>
								<template v-if="menu.type == 1">
									<span class="layui-badge layui-bg-blue">菜单</span>
								</template>
								<template v-if="menu.type == 2">
									<span class="layui-badge layui-bg-orange">按钮</span>
								</template>
							</el-form-item>
						</el-row>
						<el-row>
							<el-form-item prop="name" label="名称">
								<el-input v-model.trim="menu.name" clearable placeholder="目录\菜单\按钮名称"></el-input>
							</el-form-item>
						</el-row>
						<el-row>
							<el-form-item prop="parentName" label="上级菜单">
								<el-input v-model.trim="menu.parentName" disabled>
								</el-input>
							</el-form-item>
						</el-row>
						<el-row>
							<el-form-item v-if="menu.type == 1" prop="url" label="菜单URL">
								<el-input v-model.trim="menu.url" placeholder="例如：/{module}/{url}.html" clearable></el-input>
							</el-form-item>
						</el-row>
						<el-row>
							<el-form-item v-if="menu.type == 1 || menu.type == 2" prop="perms" label="授权标识">
								<el-input v-model.trim="menu.perms" placeholder="多个用逗号分隔，如：user:list,user:create" clearable></el-input>
							</el-form-item>
						</el-row>
						<el-row>
							<el-form-item v-if="menu.type != 2" prop="orderNum" label="排序号">
								<el-input-number v-model="menu.orderNum" :min="0" :max="20"></el-input-number>
							</el-form-item>
						</el-row>
						<el-row>
							<el-form-item v-if="menu.type != 2" prop="icon" label="图标">
								<el-input v-model.trim="menu.icon" placeholder="粘贴图标代码，例如 fa fa-user，如输入正确右侧区会自动预览" clearable>
									<el-button slot="append" :loading="iconLoading"><i :class="iconShow"></i></el-button>
								</el-input>
							</el-form-item>
						</el-row>
					</el-form>
				</el-card>
			</div>
		</div>
		<script src="${basePath}/js/module/menu.js?_${.now?long}"></script>
	</body>
</html>
